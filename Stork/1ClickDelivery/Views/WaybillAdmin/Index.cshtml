@model IEnumerable<_1ClickDelivery.Models.Waybill>

<style>

    

    .btn-default:hover, .btn-default:focus, .btn-default:active, .btn-default.active {
        background-color: #eee;
        border-color: #004AAD;
    }

    .btn-default:active, .btn-default.active {
        background-color: #eee;
        border-color: #004AAD;
    }

    .btn-default {
        color: #333;
        background-color: #fff;
        border-color: #ccc;
        -moz-border-radius: 0px;
        -webkit-border-radius: 4px 4px 0px 0px;
        border-radius: 4px 4px 0px 0px;
    }

    #datatable thead th {
        font-size: 12px;
    }

    #datatable tbody td {
        font-size: 12px;
    }

</style>
<style>
    body {
        color: black !important;
    }
</style>

<div class="container" style="margin-top:180px; margin-left:40px; margin-right:40px">
    <div class="row">
        <h2>Waybills</h2>

        <p>
            @Html.ActionLink("Create New", "Create", null, new { @class = "btn btn-primary", style = "margin-bottom:10px" })
        </p>

        @using (Html.BeginForm("Refresh", "WaybillAdmin", FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            <div class="form-inline" style="margin-bottom:15px">
                <div class="form-group" style="margin-right:15px">
                    <label>From: </label>
                    <input type='text' autocomplete="off" style=" z-index: 100000!important;" class="form-control" name="fromDate" id="fromDate" value="@ViewBag.FromDate" />
                </div>
                <div class="form-group" style="margin-right:15px">
                    <label>To: </label>
                    <input type='text' autocomplete="off" style="z-index: 100000!important;"  class="form-control" name="toDate" id="toDate" value="@ViewBag.ToDate" />
                </div>
                <div class="form-group" style="margin-right:20px">
                    <label>Status: </label>
                    <select name="status" id="status" class="form-control" selected="@ViewBag.Status">
                        <option @if (ViewBag.Status == "All") { <text> selected="selected" </text> } value="All">All</option>
                        <option @if (ViewBag.Status == "Scheduled") { <text> selected="selected" </text> } value="Scheduled">Scheduled</option>
                        <option @if (ViewBag.Status == "Collection") { <text> selected="selected" </text> } value="Collection">Collection</option>
                        <option @if (ViewBag.Status == "Collected") { <text> selected="selected" </text> } value="Collected">Collected</option>
                        <option @if (ViewBag.Status == "Delivery") { <text> selected="selected" </text> } value="Delivery">Delivery</option>
                        <option @if (ViewBag.Status == "Delivered") { <text> selected="selected" </text> } value="Delivered">Delivered</option>
                        <option @if (ViewBag.Status == "Cancelled") { <text> selected="selected" </text>  } value="Cancelled">Cancelled</option>
                    </select>
                </div>
                <div class="form-group">
                    <input type="submit" id="" value="Refresh" class="btn btn-default" />
                </div>
                <div class="form-group">
                    <input type="submit" id="" value="Print" class="btn btn-default" formaction="/WaybillAdmin/PrintInlineWaybills" />
                </div>

            </div>
        }


    </div>
</div>
<div style=" margin-bottom:100px;background-color:white; margin:30px; " class="table-responsive">
    <table id="datatable" class="table table-bordered table-hover">
        <thead>
            <tr>
                <th>
                    Waybill No
                </th>
                <th>
                    Manual Waybill No
                </th>
                <th>
                    Sender Name
                </th>
                <th>
                    Pickup Area
                </th>
                @*<th>
                    @Html.DisplayNameFor(model => model.PickupAddress)
                </th>*@
                @*<th>
                    @Html.DisplayNameFor(model => model.ItemDescription)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.SpecialInstruction)
                </th>*@
                @*<th>
                    @Html.DisplayNameFor(model => model.DestinationAddress)
                </th>*@
                <th>
                    @Html.DisplayNameFor(model => model.ReceiverName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.DeliveryArea)
                </th>
                @*<th>
                    @Html.DisplayNameFor(model => model.ReceiverPhoneNo)
                </th>*@
                <th>
                    @Html.DisplayNameFor(model => model.Status)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.DateOfPickup)
                </th>
                <th>
                    Created By
                </th>
                <th>
                    Date Time Created
                </th>
                @*<th>
                        Date Time Updated
                    </th>
                    <th>
                        Date Delivered
                    </th>*@
                <th>
                    Print
                </th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.WayBillNo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ManualWayBillNo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SenderName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PickupArea)
                </td>
                @*<td>
                    @Html.DisplayFor(modelItem => item.PickupAddress)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ItemDescription)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SpecialInstruction)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DestinationAddress)
                </td>*@
                <td>
                    @Html.DisplayFor(modelItem => item.ReceiverName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DeliveryArea)
                </td>
                @*<td>
                    @Html.DisplayFor(modelItem => item.ReceiverPhoneNo)
                </td>*@
                <td>
                    @Html.DisplayFor(modelItem => item.Status)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DateOfPickup)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CreatedBy)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.DateTimeCreated)
                </td>
                @*<td>
            @Html.DisplayFor(modelItem => item.DateTimeUpdated)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DateDelivered)
        </td>*@
                <td>
                    <a href=" @Url.Action("PrintWaybill","Waybill", new { pkWaybill = item.PKWayBill })">
                        <img src="~/img/print-icon.png" width="30" height="25" style="margin-left:10px" />
                    </a>
                </td>
                <td>
                    @Html.ActionLink("Edit", "Edit", "WaybillAdmin", new { id = item.PKWayBill }, null)
                    @*@Html.ActionLink("Details", "Details", new { id = item.PKWayBill }) |*@
                    @*@Html.ActionLink("Delete", "Delete", new { id = item.PKWayBill })*@
                </td>
                <td >
                    <a style="cursor:pointer" onclick="modalDetails('@item.PKWayBill')">Details</a>
                </td>
            </tr>
            }
        </tbody>
    </table>
</div>

<div class="modal" id="Modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button id="cl" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Details</h4>
            </div>
            <div class="modal-body">
              
            </div>
            <div class="modal-footer">
                <button id="c2" type="button" class="btn btn-warning" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/bootstrap-datatable.js"></script>
    <script src="~/js/jquery-ui.min.js"></script>
    <script type="text/javascript">
        $('#datatable').DataTable({
            "order": [[0, "desc"]]
        });
        $("#fromDate").datepicker({ changeYear: true, changeMonth: true, orientation:'bottom' });
        $("#toDate").datepicker({ changeYear: true, changeMonth: true });
        $("footer").remove();
        removeEffectOnNavbar();
        $("#navbarCollapse li:nth-child(4)").addClass("active");
       
        var modalDetails = function (id) {
            var DetailPostBackURL = '/WaybillAdmin/DetailModal';
            $.ajax({
                type: "GET",
                url: DetailPostBackURL,
                contentType: "application/json; charset=utf-8",
                data: { "Id": id },
                datatype: "json",
                success: function (data) {
                    $('.modal-body').html(data);
                    $('#Modal').modal('show');

                },
                error: function () {
                    alert("Dynamic content load failed.");
                }
            });
          
        };

        
    </script>

}
